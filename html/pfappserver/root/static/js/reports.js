function init(){$("#section").on("section.loaded",function(event){var today=new Date;$(this).find(".input-daterange input").each(function(){$(this).datepicker("setEndDate",today)});$("#reports .nav a").click(function(event){event.preventDefault();var dp=$(this).closest(".container").find(".input-daterange").data("datepicker");var dates=$(this).attr("href").substr(1).split("/");dp.pickers[0].element.val(dates[0]);dp.pickers[1].element.val(dates[1]);dp.pickers[0].update();dp.pickers[1].update()});$('[id$="Empty"]').on("click",'[href="#add"]',function(event){var match=/(.+)Empty/.exec(event.delegateTarget.id);var id=match[1];var emptyId=match[0];$("#"+id).trigger("addrow");$("#"+emptyId).addClass("hidden");return false});var id=$(this).find(".chart").attr("id");if(id)drawGraphs(id)});$("body").on("changeDate",".input-daterange input",function(event){var dp=$(this).parent().data("datepicker");if(!dp.dates){return}var start=dp.dates[0];var end=dp.dates[1];var startDate=[start.getUTCFullYear(),start.getUTCMonth()+1,start.getUTCDate()].join("-");var endDate=[end.getUTCFullYear(),end.getUTCMonth()+1,end.getUTCDate()].join("-");var graph=$(".piegraph a.active, .sidenav-section .nav-list .active a").last().attr("href").substr(1);$(this).datepicker("hide");location.hash=[graph,startDate,endDate].join("/")});$(window).hashchange(pfOnHashChange(updateSection,"/graph/nodes"));$(window).hashchange();activateNavLink()}$(function(){var items=new DynamicReport;var view=new DynamicReportView({items:items,parent:$("#section")})});var DynamicReport=function(){};DynamicReport.prototype=new Items;DynamicReport.prototype.id="#dynamicReport";DynamicReport.prototype.formName="modalDynamicReport";DynamicReport.prototype.modalId="#modalDynamicReport";DynamicReport.prototype.createSelector=".createDynamicReport";DynamicReport.prototype.get=function(options){$.ajax({url:options.url}).always(options.always).done(options.success).fail(function(jqXHR){var status_msg=getStatusMsg(jqXHR);showError(options.errorSibling,status_msg)})};DynamicReport.prototype.post=function(options){$.ajax({url:options.url,type:"POST",data:options.data}).always(options.always).done(options.success).fail(function(jqXHR){var status_msg=getStatusMsg(jqXHR);showError(options.errorSibling,status_msg)})};var DynamicReportView=function(options){ItemView.call(this,options);var that=this;this.parent=options.parent;this.items=options.items};DynamicReportView.prototype=function(){function F(){}F.prototype=ItemView.prototype;return new F}();
//# sourceMappingURL=reports.js.map